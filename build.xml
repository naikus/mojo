<?xml version="1.0"?>
<project basedir="." default="build"> 
  <target name="combine">
    <!-- Order is important here -->
    <concat destfile="mojo.js">
      <fileset dir="." includes="LICENSE" />
      <filelist dir="src">
        <file name="template.js"/>
        <file name="datalist.js"/>
        <file name="form.js"/>
        <file name="app.js"/>
      </filelist>
    </concat>
    
    <concat destfile="mojo.css">
      <fileset dir="." includes="LICENSE" />
      <filelist dir="src">
        <file name="style/view-transitions.css"/>
        <file name="style/theme.css"/>
      </filelist>
    </concat>
  </target>
  
  <target name="build" depends="clean,combine">
    <antcall target="minify" />
  </target>

  <target name="minify">
    <java jar="build-tools/yuicompressor-2.4.7.jar" fork="true">
        <arg line="-o mojo.min.js --preserve-semi mojo.js"/>
    </java>
  </target>

  <target name="clean">
    <delete file="mojo.js" />
    <delete file="mojo.min.js" />
    <delete file="mojo.css" />
  </target>
</project>
