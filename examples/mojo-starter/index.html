<!DOCTYPE html>
<html>
   <head>
      <title></title>      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
      <meta name="HandheldFriendly" content="True" />
      <meta name="MobileOptimized" content="480" />
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
      
      <meta name="apple-mobile-web-app-capable" content="yes" />

      <meta http-equiv="cleartype" content="on" />

      <link rel="stylesheet" type="text/css" href="css/mojo-icons.css" />
      
      <!-- Combined mojo.less and app.less -->
      <link rel="stylesheet" type="text/css" href="css/app.css" />
      
      <!-- script src ="js/lib/base64.min.js"> </script -->
      <!-- script src="js/lib/iscroll-lite-min.js"> </script -->

      <!--[if lt IE 9]>
         <script src ="js/lib/json2.js"> </script>
         <script src ="js/lib/html5shiv.js"> </script>
      <![endif]-->

      <!-- script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script -->

      <!-- for older safaris -->
      <script>
          if(typeof JSON === "undefined") {
              (function script(src) {
                  var doc = document, s = doc.createElement("script"), fs = doc.getElementsByTagName("script")[0];
                  s.src = src;
                  s.async = 1;
                  fs.parentNode.insertBefore(s, fs);
                  return script;
              })("js/lib/json2.js")("js/lib/html5shiv.js");
          }
      </script>

      <script src ="js/lib/h5.js"> </script>
      <!--[if lt IE 9]>
         <script src ="js/lib/event_ie.js"> </script>
      <![endif]-->
      <script src ="js/lib/mojo.js"> </script>
      
      
      <script src ="js/app.js"> </script>
   </head>

   <!-- Don't keep body as the view-port on android devices cause the views don't scroll -->
   <body>
      <div class="appmenu alt-bg">
         <ul id="appMenu" class="pad-extra list"></ul>
      </div>
      <div id="messages" class="messages hidden"></div>
      <div class="icon-hourglass" id="loading">Please wait...</div>
      <div class="viewport" id="viewPort">
         <!-- ====================================== Tab View ========================================== -->
         <article class="view" id="tabView">
            <!-- Sample IScroll style -->
            <!-- style scoped>
               #tabTwo {
                  position: absolute;
                  height: 82%;
                  width: 100%;
                  overflow: hidden;
                  padding-bottom: 10px;
               }
            </style -->
            <div class="toolbar">
               <span data-action="toggleMainMenu" class="activable action icon-menu"></span>
               <span class="title"> Main</span>

               <span id="menuToggle" class="activable action icon-ellipsis-vert right"></span>
               
               <span data-action="route" 
                     data-template="views/time.html" 
                     data-path="/ui/time"
                     class="activable action icon-clock right"></span>
               <span data-action="route" 
                     data-template="views/calendar.html" 
                     data-path="/ui/calendar"
                     class="activable action icon-calendar-empty right"></span>
            </div>
            <div id="menuContainer" class="alt-bg menu collapsed">
               <ul class="list pad-extra no-separator" id="mainToolbarMenu">
                  <li class="activable"><span class="icon-star"> Item</span></li>
                  <li class="activable"><span class="icon-star"> Item</span></li>
                  <li class="activable"><span class="icon-star"> Item</span></li>
               </ul>
            </div>
            
            <div class="content">
               <ul id="mainTab" class="tabstrip alt-bg">
                  <li class="tab activable" data-ref="#tabOne"><span>Tab One</span></li>
                  <li class="tab activable" data-ref="#tabTwo"><span>Tab Two</span></li>
                  <li class="tab activable" data-ref="#tabThree"><span>Tab Three</span></li>
               </ul>
               <div>
                  <div class="tab-content" id="tabOne">
                     <span class="pad">Contents of Tab One</span>
                     
                     <section id="binder" class="pad">
                        <span class="field" data-bind="@title:user.firstname">
                           <span data-bind="user.firstname">Name</span>
                        </span>
                        <input data-bind="value:user.lastname" type="text" />
                        <span data-bind="user.nick"></span>
                        <div data-bind="html:user.address"></div>
                        <a data-bind="@href:user.email">Email</a>
                        
                        <select data-bind="value:user.nick">
                           <option value="Naik">Naik</option>
                           <option value="Nickey">Nickey</option>
                           <option value="Aniket">Aniket</option>
                           <option value="Nick Name">Nick Name</option>
                        </select>
                        
                        <span class="button primary" id="updateModelBtn">Update Model</span>
                     </section>
                  </div>
                  
                  <div class="tab-content" id="tabTwo">
                     <!-- Sample List -->
                     <ul id="uiList"></ul>
                  </div>
                  
                  <div class="tab-content" id="tabThree">
                     <span class="pad">Contents of Tab Three</span>
                  </div>
               </div>
            </div>
            
            <!-- List Item Template -->
            <script id="uiListItemTemplate" type="text/template">
               <div class="box pad">
                  <p class="title">
                     {title}
                  </p>
                  <p class="desc left">
                     {description}
                  </p>
               </div>
            </script>

            <script defer>
               Application.addRoute("/tabView", {
                  id: "#tabView",
                  factory: function(app, viewUi) {
                     
                     var uiList, uiListItemTemplate, mainTab, menuToggle;

                     return {
                        initialize: function() {
                           // configure the toolbar
                           viewUi.find(".toolbar").actionbar({
                               refresh: function() {
                                  Messages.info("Refreshing...");
                               },
                               logout: function() {
                                  if(window.confirm("Log out?")) {}
                               }
                           });
                           
                           var binder = $("#binder").binder({
                              model: {
                                 user: {
                                    firstname: "Aniket",
                                    lastname: "Naik",
                                    nick: "Nickey",
                                    address: "<strong>Bavdhan Khurd, Pune, India</strong>",
                                    email: "mailto:naikus@gmail.com"
                                 }
                              }
                           });
                           
                           $("#updateModelBtn").on(Events.tap, function() {
                              binder.update("user.nick", "Nick Name");
                              binder.update({
                                 user: {
                                    firstname: "Naikus",
                                    address: "<i>Bavdhan Khurd</i>"
                                 }
                              });
                           });
                           
                           var menuContainer = $("#menuContainer");
                           menuToggle = $("#menuToggle").toggle({
                              onchange: function(val) {
                                 if(val) {
                                    menuContainer.removeClass("collapsed");
                                 }else {
                                    menuContainer.addClass("collapsed");
                                 }
                              }
                           });
                           menuContainer.on(Events.tap, function() {
                              setTimeout(function() {
                                 menuToggle.setOn(false);
                              }, 200);
                           });
                           
                           
                           // list item rendering template
                           uiListItemTemplate = $("#uiListItemTemplate").template();

                           // list widget
                           uiList = $("#uiList").datalist({
                              selectable: true,
                              itemClass: "activable",
                              render: function(list, item, i, itemModel) {
                                 item.html(uiListItemTemplate.process(itemModel))
                              }
                           });
                           
                           var arrItems = [];
                           for(var i = 0; i < 40; i++) {
                              arrItems[arrItems.length] = {
                                 title: "Item " + (i + 1), 
                                 description: "Description for Item " + (i + 1)
                              };
                           }
                           uiList.setItems(arrItems);
                           
                           uiList.on(Events.tap, function(e, item, itemModel) {
                              // Messages.info(itemModel.description);
                           });
                           
                           
                           // var tabTwoScroll = new IScroll('#tabTwo');
                           // tabstrip widget
                           mainTab = $("#mainTab").tabstrip({
                              ontabchange: function(currTab, oldTab) {
                                 // Messages.info("Tab selected: " + this.getSelectedIndex());
                                 /*
                                 if(this.getSelectedIndex() == 1) {
                                    setTimeout(function () {
                                       tabTwoScroll.refresh();
                                    }, 100);
                                 }
                                 */
                              }
                           });
                        },

                        activate: function(routeParams, data) {
                        }
                     };
                  }
               });
            </script>
         </article>
      </div>
      
      
      <script>
         (function(win) {
            var app = win.Application,
               menuData = [
                  {
                     label: "Settings", 
                     icon: "icon-cog", 
                     action: function() {
                        Messages.info("View settings");
                     }
                  },
                  {
                     label: "Logout",
                     icon: "icon-logout",
                     action: function() {
                        if(window.confirm("Logout?")) {
                           window.location.replace("index.html");
                        }
                     }
                  }
               ],
               
               appMenu = $("#appMenu").datalist({
                  itemClass: "activable", 
                  selectable: false,
                  template: $.template('<span class="{icon}"> {label}</span>'),
                  data: menuData
               });
               
               appMenu.on(Events.tap, function(e, item, itemData) {
                  if(itemData.action) {
                     itemData.action(itemData);
                  }
               });
         })(window);
      </script>
   </body>
</html>
