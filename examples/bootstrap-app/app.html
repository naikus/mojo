<!DOCTYPE html>
<html>
   <head>
      <title></title>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
      <meta name="HandheldFriendly" content="True" />
      <meta name="MobileOptimized" content="480" />
      <meta name="viewport" content="width=device-width; height=device-height; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" />
      <meta name="apple-mobile-web-app-capable" content="yes" />
      
      <script type="text/javascript" src ="js/h5.js"> </script>
      <script type="text/javascript" src ="js/mojo.js"> </script>
      
      <link rel="stylesheet" type="text/css" href="css/mojo.css" />
      
      <style type="text/css">
         *{
            font-family: Helvetica;
         }
         
         #viewPort {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 115%;
            background-color: #eee;
         }
         
         .content {
            padding: 5px;
            padding-top: 10px;
         }
      </style>
      
      <script>
         // set the default user action event (tap in touch enabled browsers or fallback to click
         var TAP = ("ontouchstart" in document.documentElement) ? "tap" : "click", 
         
            // create an instance of the application, this can be done before ready. This has an added 
            // advantage that views can be registered as they are parsed before the DOM is ready
            application = mojo.Application();
            
         // initialize our application on ready   
         $.ready(function() {
            application.initialize({
               startView: "main", // default is 'main'
               viewPort: "viewPort" // default is body
            });
            
            // hide the URL bar when a view transitions in
            $("#viewPort").on("viewtransitionin", function() {
               var doc = window.document, 
                  yOffset = window.pageYOffset || doc.compatMode === "CSS1Compat" && 
                            doc.documentElement.scrollTop || doc.body.scrollTop || 0;               
               setTimeout(function() {
                  if(yOffset < 20) {
                     window.scrollTo(0, 1);
                  }
               }, 30);
            });
         });
      </script>
   </head>
   <body>
      <div id="viewPort">
         
         <!-- 
            This is a sample view. Below is a recommended structure for views for mojo library. Each view MUST
            have the CSS class 'view' and MUST have an id
         -->
         <article class="view" id="main">
            <!-- View specific style sheets -->
            <style scoped>
               #main {}
            </style>
            <script>
               application.registerView("main", function(app, viewUi) {
                  // our view controller object, all methods are optional
                  return {
                     initialize: function() {
                        $("#listButt").on(TAP, function() {
                           app.showView("listView", {
                              selectedIndex: 3,
                              items: ["Zero", "One", "Two", "Three", "Four"],
                              title: "List of Numbers"
                           });
                        });
                     },
                     activate: function(data) {
                        $("#result").html(data ? 
                           "Selected Item: " + data.selectedItem + ", Index: " + data.selectedIndex
                           : "No item selected");
                     },
                     deactivate: function() {},
                     destroy: function() {}
                  };
               });
            </script>
            <div class="content">
               <a id="listButt" class="button col-one">Show Me A list</a>
               <div id="result" class="row"></div>
            </div>
         </article>
         
         
         
         <!-- 
            A list view: The list view takes following data:
            {
               items: [], // an array of items
               selectedIndex: -1, // index that needs to be initially selected
            }
            
            When the user selects an item, the list view is popped and returns
            following data to calling view
            {
               selectedItem: {}, // the item that was selected
               selectedIndex: 0, // the index of the newly selected item by user
            }
            If the user hits the back button, the list view, is popped and no data is returned to the view
            below
         -->
         <article class="view" id="listView">
            <style scoped>
               #listView {}
            </style>
            <script>
               application.registerView("listView", function(app, viewUi) {
                  var dataList, listTitle;
                  
                  function clearList(e) {
                     if(e.view === "listView") {
                        dataList.setItems(null);
                        listTitle.html("List");
                     }
                  }
                  
                  return {
                     initialize: function() {
                        dataList = $("#dataList").datalist({
                           itemClass: "activable",
                           onselectionchange: function(currItem, oldItem) {
                              if(typeof currItem != "undefined" && typeof oldItem !== "undefined") {
                                 app.popView({
                                    selectedItem: currItem.data("model"),
                                    selectedIndex: dataList.getSelectedIndex()
                                 });
                              }
                           }
                        });
                        listTitle = $("#listTitle");
                        
                        app.getViewPort().on("viewtransitionout", clearList);
                     },
                     activate: function(data) {
                        if(!data) {return}
                        dataList.setItems(data.items);
                        listTitle.html(data.title || "List");
                     },
                     destroy: function() {
                        app.getViewPort().un("viewtransitionout", clearList);
                     }
                  };
               });
            </script>
            <div class="content">
               <section>
                  <header id="listTitle"></header>
                  <div id="dataList">
                     
                  </div>
               </section>
            </div>
         </article>
      </div>
      
      
   </body>
</html>
